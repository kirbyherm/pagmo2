 
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Writing your first optimisation problem &#8212; pagmo 2.19.0 documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="shortcut icon" href="../../../_static/logo_favico.ico"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Evolving a population" href="evolving_a_population.html" />
    <link rel="prev" title="Preliminaries" href="cpp_tut_preliminaries.html" />
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto|Comfortaa|Space+Mono"> 
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">pagmo 2.19.0 documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Contents:
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../install.html">
   Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../quickstart.html">
   Quick start
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../overview.html">
   Capabilities
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="cpp_tut.html">
   C++ tutorial
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="cpp_tut_preliminaries.html">
     Preliminaries
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Writing your first optimisation problem
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="evolving_a_population.html">
     Evolving a population
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../cpp_docs.html">
   C++ API documentation
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../types.html">
     Types
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../problem.html">
     Problem
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../algorithm.html">
     Algorithm
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../population.html">
     Population
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../island.html">
     Island
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../archipelago.html">
     Archipelago
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../bfe.html">
     Batch fitness evaluator
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../topology.html">
     Topology
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_policy.html">
     Replacement policy
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../s_policy.html">
     Selection policy
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../algorithms/null.html">
     Null algorithm
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../algorithms/bee_colony.html">
     Artificial Bee Colony
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../algorithms/cmaes.html">
     Covariance Matrix Adaptation Evolutionary Strategy (CMA-ES)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../algorithms/compass_search.html">
     Compass Search
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../algorithms/de.html">
     Differential Evolution
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../algorithms/de1220.html">
     Self-adaptive Differential Evolution (DE 1220 aka pDE)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../algorithms/gaco.html">
     Extended Ant Colony Optimization (gaco)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../algorithms/gwo.html">
     Grey Wolf Optimizer (gwo)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../algorithms/ihs.html">
     Improved Harmony Search (IHS)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../algorithms/ipopt.html">
     Ipopt
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../algorithms/maco.html">
     Multi-objective Hypervolume-based Ant Colony Optimizer (MHACO)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../algorithms/moead.html">
     Multi-objective Evolutionary Algorithm by Decomposition (MOEA/D-DE)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../algorithms/moead_gen.html">
     Multi-objective Evolutionary Algorithm by Decomposition Generational (GMOEA/D-DE)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../algorithms/mbh.html">
     Monotonic Basin Hopping (MBH) - Generalized
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../algorithms/cstrs_self_adaptive.html">
     Self-adaptive constraints handling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../algorithms/nlopt.html">
     NLopt solvers
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../algorithms/nsga2.html">
     Non dominated sorting genetic algorithm (NSGA-II)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../algorithms/nspso.html">
     Non dominated sorting particle swarm optimization(NSPSO)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../algorithms/pso.html">
     Particle Swarm Optimization (PSO)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../algorithms/pso_gen.html">
     Particle Swarm Optimization Generational (GPSO)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../algorithms/sade.html">
     Self-adaptive Differential Evolution (jDE and iDE)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../algorithms/sea.html">
     (N+1)-ES Simple Evolutionary Algorithm
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../algorithms/sga.html">
     Simple Genetic Algorithm
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../algorithms/simulated_annealing.html">
     Simulated Annealing (Corana’s version)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../algorithms/xnes.html">
     Exponential Natural Evolution Strategies (xNES)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../problems/null.html">
     Null problem
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../problems/rosenbrock.html">
     Rosenbrock
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../problems/rastrigin.html">
     Rastrigin
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../problems/schwefel.html">
     Schwefel
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../problems/ackley.html">
     Ackley
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../problems/golomb_ruler.html">
     Optimal Golomb Ruler
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../problems/griewank.html">
     Griewank
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../problems/lennard_jones.html">
     Lennard Jones Cluster
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../problems/zdt.html">
     ZDT test suite
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../problems/dtlz.html">
     DTLZ test suite
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../problems/hock_schittkowski_71.html">
     Hock Schittkowsky No.71
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../problems/inventory.html">
     News-vendor problem
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../problems/luksan_vlcek1.html">
     Luksan Vlcek 1
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../problems/minlp_rastrigin.html">
     MINLP Rastrigin
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../problems/translate.html">
     Translate
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../problems/decompose.html">
     Decompose
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../problems/cec2006.html">
     CEC 2006 Problem Suite (single-objective, constrained)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../problems/cec2009.html">
     CEC 2009 Problem Suite (multi-objective, constrained and unconstrained)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../problems/cec2013.html">
     CEC 2013 Problem Suite (box-bound, single objective)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../problems/cec2014.html">
     CEC 2014 Problem Suite (box-bound, single objective)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../problems/unconstrain.html">
     Unconstrain
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../problems/wfg.html">
     WFG problem test suite
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../islands/thread_island.html">
     Thread island
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../islands/fork_island.html">
     Fork island
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../batch_evaluators/default_bfe.html">
     Default BFE
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../batch_evaluators/thread_bfe.html">
     Multithreaded BFE
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../batch_evaluators/member_bfe.html">
     Member function BFE
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../topologies/unconnected.html">
     Unconnected topology
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../topologies/fully_connected.html">
     Fully connected
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../topologies/base_bgl_topology.html">
     Base BGL topology
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../topologies/ring.html">
     Ring
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../topologies/free_form.html">
     Free-form topology
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../r_policies/fair_replace.html">
     Fair replacement policy
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../s_policies/select_best.html">
     Best selection policy
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../utils/multi_objective.html">
     Multi-objective optimization utilities
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../utils/constrained.html">
     Constrained optimization utilities
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../utils/discrepancy.html">
     Low-discrepancy sequences
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../utils/hypervolume.html">
     Hypervolumes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../utils/gradient_and_hessians.html">
     Utilities for gradient and hessians
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../utils/genetic_operators.html">
     Genetic Operators
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../miscellanea/generic.html">
     Generic utilities
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../miscellanea/type_traits.html">
     Type traits and enums
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../miscellanea/exceptions.html">
     Exceptions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../miscellanea/utility_classes.html">
     Utility classes
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../credits.html">
   Credits
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../changelog.html">
   Changelog
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/esa/pagmo2"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/esa/pagmo2/issues/new?title=Issue%20on%20page%20%2Fdocs/cpp/tutorials/cpp_tut_first_problem.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../../_sources/docs/cpp/tutorials/cpp_tut_first_problem.rst.txt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.rst</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#a-simple-problem">
   A simple problem
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-bare-necessities">
   The bare necessities
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#meet-pagmo-problem">
   Meet pagmo::problem
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#adding-the-constraints">
   Adding the constraints
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Writing your first optimisation problem</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#a-simple-problem">
   A simple problem
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-bare-necessities">
   The bare necessities
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#meet-pagmo-problem">
   Meet pagmo::problem
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#adding-the-constraints">
   Adding the constraints
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="writing-your-first-optimisation-problem">
<h1>Writing your first optimisation problem<a class="headerlink" href="#writing-your-first-optimisation-problem" title="Permalink to this headline">#</a></h1>
<p>A fundamental requirement of any optimisation
library is the ability to represent an optimisation
problem to be solved. In this section, our
goal is to show how this is done in pagmo.</p>
<section id="a-simple-problem">
<h2>A simple problem<a class="headerlink" href="#a-simple-problem" title="Permalink to this headline">#</a></h2>
<p>We will be considering the minimisation of
the multidimensional objective function</p>
<div class="math notranslate nohighlight">
\[f\left(x_1, x_2, x_3, x_4\right) = x_1x_4(x_1+x_2+x_3) + x_3,\]</div>
<p>subject to the box bounds</p>
<div class="math notranslate nohighlight">
\[1 \le x_{1,2,3,4} \le 5\]</div>
<p>and to the constraints</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align}
   x_1^2+x_2^2+x_3^2+x_4^2 - 40 &amp;= 0, \\
   25 - x_1 x_2 x_3 x_4 &amp;\le 0.
\end{align}\end{split}\]</div>
<p>In pagmo’s taxonomy, this optimisation problem is</p>
<ul class="simple">
<li><p><em>continuous</em> (because <span class="math notranslate nohighlight">\(x_{1,2,3,4}\)</span> are real variables),</p></li>
<li><p><em>deterministic</em> (as neither the objectives nor the constraints depend
on stochastic variables),</p></li>
<li><p><em>single-objective</em> (because the objective
function produces a single value), and</p></li>
<li><p><em>constrained</em> (because there are nonlinear
constraints in addition to the box bounds).</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In this chapter, we will focus on the implementation
of a single-objective
continuous problem. pagmo can also represent many other
types of problems, including multi-objective and
(mixed) integer problems. TODO link to the deep dive.</p>
</div>
<p>We will start by implementing the objective function
and the box bounds first, and we will then add
the constraints at a later stage.</p>
</section>
<section id="the-bare-necessities">
<h2>The bare necessities<a class="headerlink" href="#the-bare-necessities" title="Permalink to this headline">#</a></h2>
<p>In pagmo, an optimisation problem must provide
at the very least an objective function and
the box bounds. Let’s see how this is done
for our simple example problem:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">first_udp_ver0.cpp</span><a class="headerlink" href="#id1" title="Permalink to this code">#</a></div>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;cmath&gt;</span>
<span class="linenos"> 2</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;initializer_list&gt;</span>
<span class="linenos"> 3</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="linenos"> 4</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;utility&gt;</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pagmo/problem.hpp&gt;</span>
<span class="linenos"> 7</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pagmo/types.hpp&gt;</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">pagmo</span><span class="p">;</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="c1">// Our simple example problem, version 0.</span>
<span class="linenos">12</span><span class="k">struct</span><span class="w"> </span><span class="nc">problem_v0</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">13</span><span class="w">    </span><span class="c1">// Implementation of the objective function.</span>
<span class="linenos">14</span><span class="w">    </span><span class="n">vector_double</span><span class="w"> </span><span class="nf">fitness</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">vector_double</span><span class="w"> </span><span class="o">&amp;</span><span class="n">dv</span><span class="p">)</span><span class="w"> </span><span class="k">const</span>
<span class="linenos">15</span><span class="w">    </span><span class="p">{</span>
<span class="linenos">16</span><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="n">dv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">dv</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">dv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">dv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">dv</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">dv</span><span class="p">[</span><span class="mi">2</span><span class="p">]};</span>
<span class="linenos">17</span><span class="w">    </span><span class="p">}</span>
<span class="linenos">18</span><span class="w">    </span><span class="c1">// Implementation of the box bounds.</span>
<span class="linenos">19</span><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">vector_double</span><span class="p">,</span><span class="w"> </span><span class="n">vector_double</span><span class="o">&gt;</span><span class="w"> </span><span class="n">get_bounds</span><span class="p">()</span><span class="w"> </span><span class="k">const</span>
<span class="linenos">20</span><span class="w">    </span><span class="p">{</span>
<span class="linenos">21</span><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">{{</span><span class="mf">1.</span><span class="p">,</span><span class="w"> </span><span class="mf">1.</span><span class="p">,</span><span class="w"> </span><span class="mf">1.</span><span class="p">,</span><span class="w"> </span><span class="mf">1.</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="mf">5.</span><span class="p">,</span><span class="w"> </span><span class="mf">5.</span><span class="p">,</span><span class="w"> </span><span class="mf">5.</span><span class="p">,</span><span class="w"> </span><span class="mf">5.</span><span class="p">}};</span>
<span class="linenos">22</span><span class="w">    </span><span class="p">}</span>
<span class="linenos">23</span><span class="p">};</span>
<span class="linenos">24</span>
<span class="linenos">25</span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="linenos">26</span><span class="p">{</span>
<span class="linenos">27</span><span class="w">    </span><span class="c1">// Construct a pagmo::problem from our example problem.</span>
<span class="linenos">28</span><span class="w">    </span><span class="n">problem</span><span class="w"> </span><span class="n">p</span><span class="p">{</span><span class="n">problem_v0</span><span class="p">{}};</span>
<span class="linenos">29</span>
<span class="linenos">30</span><span class="w">    </span><span class="c1">// Compute the value of the objective function</span>
<span class="linenos">31</span><span class="w">    </span><span class="c1">// in the point (1, 2, 3, 4).</span>
<span class="linenos">32</span><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Value of the objfun in (1, 2, 3, 4): &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">fitness</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">})[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;\n&#39;</span><span class="p">;</span>
<span class="linenos">33</span>
<span class="linenos">34</span><span class="w">    </span><span class="c1">// Fetch the lower/upper bounds for the first variable.</span>
<span class="linenos">35</span><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Lower bounds: [&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">get_lb</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;]</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="linenos">36</span><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Upper bounds: [&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">get_ub</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;]</span><span class="se">\n\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="linenos">37</span>
<span class="linenos">38</span><span class="w">    </span><span class="c1">// Print p to screen.</span>
<span class="linenos">39</span><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;\n&#39;</span><span class="p">;</span>
<span class="linenos">40</span><span class="p">}</span>
</pre></div>
</div>
</div>
<p>Let’s analyse this code.</p>
<p>After the inclusion of the necessary header files, and a helpful</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">pagmo</span><span class="p">;</span>
</pre></div>
</div>
<p>to reduce typing, we reach the definition
of our optimisation
problem via a class called <code class="docutils literal notranslate"><span class="pre">problem_v0</span></code>. As explained
in the <a class="reference internal" href="cpp_tut_preliminaries.html#cpp-tut-type-erasure"><span class="std std-ref">section about type erasure</span></a>,
this class does not need to derive from any base class.
It is just a “regular” class implementing two specific
member functions:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">fitness()</span></code>, which is used to compute the value of the
objective function for the input decision
vector <code class="docutils literal notranslate"><span class="pre">dv</span></code>, and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get_bounds()</span></code>, which is used to fetch the box bounds of
the problem.</p></li>
</ul>
<p>As you can notice, the signatures of both <code class="docutils literal notranslate"><span class="pre">fitness()</span></code> and <code class="docutils literal notranslate"><span class="pre">get_bounds()</span></code>
use the type <a class="reference internal" href="../types.html#_CPPv4N5pagmo13vector_doubleE" title="pagmo::vector_double"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">pagmo::vector_double</span></code></a>. This is the type
used by pagmo to represent decision and fitness vectors, and currently
it is just an alias for <code class="docutils literal notranslate"><span class="pre">std::vector&lt;double&gt;</span></code>.</p>
<p>The objective function is called <code class="docutils literal notranslate"><span class="pre">fitness()</span></code> in pagmo because
it is used to return not only the value of the objective function,
but also of the constraints (thus in some sense it computes the
overall “fitness”
of the input decision vector). In this specific case, however,
our optimisation problem does not have constraints yet,
and thus the <code class="docutils literal notranslate"><span class="pre">fitness()</span></code> implementation just returns
a vector of size 1 whose only element is the value
of the (single) objective function:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">vector_double</span><span class="w"> </span><span class="nf">fitness</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">vector_double</span><span class="w"> </span><span class="o">&amp;</span><span class="n">dv</span><span class="p">)</span><span class="w"> </span><span class="k">const</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="n">dv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">dv</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">dv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">dv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">dv</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">dv</span><span class="p">[</span><span class="mi">2</span><span class="p">]};</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The other mandatory function, <code class="docutils literal notranslate"><span class="pre">get_bounds()</span></code>, returns the
box bounds of the problem as a <code class="docutils literal notranslate"><span class="pre">std::pair</span></code> of lower/upper
bounds:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">vector_double</span><span class="p">,</span><span class="w"> </span><span class="n">vector_double</span><span class="o">&gt;</span><span class="w"> </span><span class="n">get_bounds</span><span class="p">()</span><span class="w"> </span><span class="k">const</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{{</span><span class="mf">1.</span><span class="p">,</span><span class="w"> </span><span class="mf">1.</span><span class="p">,</span><span class="w"> </span><span class="mf">1.</span><span class="p">,</span><span class="w"> </span><span class="mf">1.</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="mf">5.</span><span class="p">,</span><span class="w"> </span><span class="mf">5.</span><span class="p">,</span><span class="w"> </span><span class="mf">5.</span><span class="p">,</span><span class="w"> </span><span class="mf">5.</span><span class="p">}};</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In addition to returning the box bounds, the <code class="docutils literal notranslate"><span class="pre">get_bounds()</span></code>
function plays another important role: it also
(implicitly) establishes the dimension of the problem
via the sizes of the returned lower/upper bounds vectors
(in this specific case, 4).</p>
</section>
<section id="meet-pagmo-problem">
<h2>Meet pagmo::problem<a class="headerlink" href="#meet-pagmo-problem" title="Permalink to this headline">#</a></h2>
<p>After the definition of our optimisation problem, <code class="docutils literal notranslate"><span class="pre">problem_v0</span></code>,
we encounter the <code class="docutils literal notranslate"><span class="pre">main()</span></code> function. In the <code class="docutils literal notranslate"><span class="pre">main()</span></code>, the first
thing we do is to construct a <a class="reference internal" href="../problem.html#_CPPv4N5pagmo7problemE" title="pagmo::problem"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">pagmo::problem</span></code></a> from an
instance of <code class="docutils literal notranslate"><span class="pre">problem_v0</span></code>:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">problem</span><span class="w"> </span><span class="n">p</span><span class="p">{</span><span class="n">problem_v0</span><span class="p">{}};</span>
</pre></div>
</div>
<p><a class="reference internal" href="../problem.html#_CPPv4N5pagmo7problemE" title="pagmo::problem"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">pagmo::problem</span></code></a> is pagmo’s
<a class="reference internal" href="cpp_tut_preliminaries.html#cpp-tut-type-erasure"><span class="std std-ref">type-erased</span></a> interface to optimisation
problems. It is a generic container which can store internally
an instance of any class which “acts like” an optimisation problem,
that is, any class which provides (at least) the two member functions
described earlier (<code class="docutils literal notranslate"><span class="pre">fitness()</span></code> and <code class="docutils literal notranslate"><span class="pre">get_bounds()</span></code>). In the pagmo
jargon, we refer to classes which “act like” optimisation problems
as <em>user-defined problems</em>, or UDPs.</p>
<p>In addition to storing a UDP (which, by itself, would not be
that useful), <a class="reference internal" href="../problem.html#_CPPv4N5pagmo7problemE" title="pagmo::problem"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">pagmo::problem</span></code></a> provides various member
functions to access the properties and capabilities of the UDP.
We can, for instance, call the <a class="reference internal" href="../problem.html#_CPPv4NK5pagmo7problem7fitnessERK13vector_double" title="pagmo::problem::fitness"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">pagmo::problem::fitness()</span></code></a>
member function of <code class="docutils literal notranslate"><span class="pre">p</span></code> to invoke the fitness function of the UDP:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Value of the objfun in (1, 2, 3, 4): &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">fitness</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">})[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;\n&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>We can also fetch the lower/upper box bounds of the UDP
via the <a class="reference internal" href="../problem.html#_CPPv4NK5pagmo7problem6get_lbEv" title="pagmo::problem::get_lb"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">pagmo::problem::get_lb()</span></code></a> and
<a class="reference internal" href="../problem.html#_CPPv4NK5pagmo7problem6get_ubEv" title="pagmo::problem::get_ub"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">pagmo::problem::get_ub()</span></code></a> member functions:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Fetch the lower/upper bounds for the first variable.</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Lower bounds: [&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">get_lb</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;]</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Upper bounds: [&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">get_ub</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;]</span><span class="se">\n\n</span><span class="s">&quot;</span><span class="p">;</span>
</pre></div>
</div>
<p>Printing <code class="docutils literal notranslate"><span class="pre">p</span></code> to screen via</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;\n&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>will produce a human-readable
summary that may look like this:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Problem name: 10problem_v0
      Global dimension:                       4
      Integer dimension:                      0
      Fitness dimension:                      1
      Number of objectives:                   1
      Equality constraints dimension:         0
      Inequality constraints dimension:       0
      Lower bounds: [1, 1, 1, 1]
      Upper bounds: [5, 5, 5, 5]
      Has batch fitness evaluation: false

      Has gradient: false
      User implemented gradient sparsity: false
      Has hessians: false
      User implemented hessians sparsity: false

      Fitness evaluations: 1

      Thread safety: basic
</pre></div>
</div>
<p>Quite a mouthful! Do not worry about deciphering this
output right now, as we will examine the more intricate
aspects of the definition of an optimisation problem in due time.</p>
<p>For now, let us just point out that, from our simple
UDP definition, pagmo was able to infer
on its own various properties of the optimisation problem
(e.g., the problem dimension, the number of objectives,
the absence of constraints, etc.). pagmo is able to do this
thanks to both introspection capabilities (based on template
metaprogramming) and (hopefully) sensible defaults.</p>
</section>
<section id="adding-the-constraints">
<h2>Adding the constraints<a class="headerlink" href="#adding-the-constraints" title="Permalink to this headline">#</a></h2>
<p>In order to implement the constraints in our UDP we have to:</p>
<ul class="simple">
<li><p>add a couple of member functions which describe the type
and number of constraints,</p></li>
<li><p>modify the fitness function to return, in addition to the
objective function, also the value of the constraints for
an input decision vector.</p></li>
</ul>
<p>Let us see the code:</p>
<div class="highlight-udiff notranslate"><div class="highlight"><pre><span></span><span class="gd">--- /home/runner/work/pagmo2/pagmo2/tutorials/first_udp_ver0.cpp</span>
<span class="gi">+++ /home/runner/work/pagmo2/pagmo2/tutorials/first_udp_ver1.cpp</span>
<span class="gu">@@ -8,12 +8,26 @@</span>
<span class="w"> </span>
<span class="w"> </span>using namespace pagmo;
<span class="w"> </span>
<span class="gd">-// Our simple example problem, version 0.</span>
<span class="gd">-struct problem_v0 {</span>
<span class="gi">+// Our simple example problem, version 1.</span>
<span class="gi">+struct problem_v1 {</span>
<span class="gi">+    // Number of equality constraints.</span>
<span class="gi">+    vector_double::size_type get_nec() const</span>
<span class="gi">+    {</span>
<span class="gi">+        return 1;</span>
<span class="gi">+    }</span>
<span class="gi">+    // Number of inequality constraints.</span>
<span class="gi">+    vector_double::size_type get_nic() const</span>
<span class="gi">+    {</span>
<span class="gi">+        return 1;</span>
<span class="gi">+    }</span>
<span class="w"> </span>    // Implementation of the objective function.
<span class="w"> </span>    vector_double fitness(const vector_double &amp;dv) const
<span class="w"> </span>    {
<span class="gd">-        return {dv[0] * dv[3] * (dv[0] + dv[1] + dv[2]) + dv[2]};</span>
<span class="gi">+        return {</span>
<span class="gi">+            dv[0] * dv[3] * (dv[0] + dv[1] + dv[2]) + dv[2],                     // objfun</span>
<span class="gi">+            dv[0] * dv[0] + dv[1] * dv[1] + dv[2] * dv[2] + dv[3] * dv[3] - 40., // equality con.</span>
<span class="gi">+            25. - dv[0] * dv[1] * dv[2] * dv[3]                                  // inequality con.</span>
<span class="gi">+        };</span>
<span class="w"> </span>    }
<span class="w"> </span>    // Implementation of the box bounds.
<span class="w"> </span>    std::pair&lt;vector_double, vector_double&gt; get_bounds() const
<span class="gu">@@ -25,11 +39,14 @@</span>
<span class="w"> </span>int main()
<span class="w"> </span>{
<span class="w"> </span>    // Construct a pagmo::problem from our example problem.
<span class="gd">-    problem p{problem_v0{}};</span>
<span class="gi">+    problem p{problem_v1{}};</span>
<span class="w"> </span>
<span class="gd">-    // Compute the value of the objective function</span>
<span class="gd">-    // in the point (1, 2, 3, 4).</span>
<span class="gd">-    std::cout &lt;&lt; &quot;Value of the objfun in (1, 2, 3, 4): &quot; &lt;&lt; p.fitness({1, 2, 3, 4})[0] &lt;&lt; &#39;\n&#39;;</span>
<span class="gi">+    // Compute the value of the objective function, equality and</span>
<span class="gi">+    // inequality constraints in the point (1, 2, 3, 4).</span>
<span class="gi">+    const auto fv = p.fitness({1, 2, 3, 4});</span>
<span class="gi">+    std::cout &lt;&lt; &quot;Value of the objfun in (1, 2, 3, 4): &quot; &lt;&lt; fv[0] &lt;&lt; &#39;\n&#39;;</span>
<span class="gi">+    std::cout &lt;&lt; &quot;Value of the eq. constraint in (1, 2, 3, 4): &quot; &lt;&lt; fv[1] &lt;&lt; &#39;\n&#39;;</span>
<span class="gi">+    std::cout &lt;&lt; &quot;Value of the ineq. constraint in (1, 2, 3, 4): &quot; &lt;&lt; fv[2] &lt;&lt; &#39;\n&#39;;</span>
<span class="w"> </span>
<span class="w"> </span>    // Fetch the lower/upper bounds for the first variable.
<span class="w"> </span>    std::cout &lt;&lt; &quot;Lower bounds: [&quot; &lt;&lt; p.get_lb()[0] &lt;&lt; &quot;]\n&quot;;
</pre></div>
</div>
<p>In order to specify the type and number of constraints in our
optimisation problem, we have to implement the two member
functions <code class="docutils literal notranslate"><span class="pre">get_nec()</span></code>, which returns the number of equality
constraints, and <code class="docutils literal notranslate"><span class="pre">get_nic()</span></code>, which returns the number of
inequality constraints:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">vector_double</span><span class="o">::</span><span class="n">size_type</span><span class="w"> </span><span class="nf">get_nec</span><span class="p">()</span><span class="w"> </span><span class="k">const</span>
<span class="p">{</span>
<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">vector_double</span><span class="o">::</span><span class="n">size_type</span><span class="w"> </span><span class="nf">get_nic</span><span class="p">()</span><span class="w"> </span><span class="k">const</span>
<span class="p">{</span>
<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Note that the number of (in)equality constraints is represented
via the size type of <a class="reference internal" href="../types.html#_CPPv4N5pagmo13vector_doubleE" title="pagmo::vector_double"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">vector_double</span></code></a>
(which is an unsigned integral type, usually <code class="docutils literal notranslate"><span class="pre">std::size_t</span></code>).</p>
<p>Next, we need to modify our fitness function to compute,
in addition to the objective function, the (in)equality
constraints for an input decision vector.
pagmo adopts the following conventions:</p>
<ul class="simple">
<li><p>the constraints are expressed as equations with zero
on the right-hand-side,</p></li>
<li><p>the values returned by the fitness function are computed
from the left-hand-sides of the constraint equations,</p></li>
<li><p>the inequality constraints are expressed via
a less-than-or-equal relation (<span class="math notranslate nohighlight">\(\leq\)</span>),</p></li>
<li><p>in the fitness vector, the equality constraints
follow the value(s) of the objective function and precede
the inequality constraints.</p></li>
</ul>
<p>In our specific example, we have 1 equality constraint and 1
inequality constraint,</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align}
   x_1^2+x_2^2+x_3^2+x_4^2 - 40 &amp;= 0, \\
   25 - x_1 x_2 x_3 x_4 &amp;\le 0,
\end{align}\end{split}\]</div>
<p>and thus the fitness function will have to return a vector
with 3 values, which are, in order, the objective function,
the equality constraint and the inequality constraint:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">vector_double</span><span class="w"> </span><span class="nf">fitness</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">vector_double</span><span class="w"> </span><span class="o">&amp;</span><span class="n">dv</span><span class="p">)</span><span class="w"> </span><span class="k">const</span>
<span class="p">{</span>
<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">dv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">dv</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">dv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">dv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">dv</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">dv</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="w">                     </span><span class="c1">// objfun</span>
<span class="w">      </span><span class="n">dv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">dv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">dv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">dv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">dv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">dv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">dv</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">dv</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">40.</span><span class="p">,</span><span class="w"> </span><span class="c1">// equality con.</span>
<span class="w">      </span><span class="mf">25.</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">dv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">dv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">dv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">dv</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w">                                  </span><span class="c1">// inequality con.</span>
<span class="w">   </span><span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now we can create a <a class="reference internal" href="../problem.html#_CPPv4N5pagmo7problemE" title="pagmo::problem"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">pagmo::problem</span></code></a> from our
new UDP, and, if we print it to screen, we can verify how
the <a class="reference internal" href="../problem.html#_CPPv4N5pagmo7problemE" title="pagmo::problem"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">pagmo::problem</span></code></a> class has correctly
identified the number and type of constraints from the
implementation of our UDP:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Problem name: 10problem_v1
      Global dimension:                       4
      Integer dimension:                      0
      Fitness dimension:                      3
      Number of objectives:                   1
      Equality constraints dimension:         1
      Inequality constraints dimension:       1
      Tolerances on constraints: [0, 0]
      Lower bounds: [1, 1, 1, 1]
      Upper bounds: [5, 5, 5, 5]
      Has batch fitness evaluation: false

      Has gradient: false
      User implemented gradient sparsity: false
      Has hessians: false
      User implemented hessians sparsity: false

      Fitness evaluations: 3

      Thread safety: basic
</pre></div>
</div>
<p>We can also verify that the <a class="reference internal" href="../problem.html#_CPPv4NK5pagmo7problem7fitnessERK13vector_double" title="pagmo::problem::fitness"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">pagmo::problem::fitness()</span></code></a>
function now produces a vector with three components:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Compute the value of the objective function, equality and</span>
<span class="c1">// inequality constraints in the point (1, 2, 3, 4).</span>
<span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">fv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">fitness</span><span class="p">({</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">});</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Value of the objfun in (1, 2, 3, 4): &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">fv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;\n&#39;</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Value of the eq. constraint in (1, 2, 3, 4): &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">fv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;\n&#39;</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Value of the ineq. constraint in (1, 2, 3, 4): &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">fv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;\n&#39;</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="cpp_tut_preliminaries.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Preliminaries</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="evolving_a_population.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Evolving a population</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By pagmo development team<br/>
  
      &copy; Copyright 2017-2021, pagmo development team.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>